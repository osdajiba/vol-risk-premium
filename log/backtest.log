2025-05-13 11:19:48,003 - vrp_system - INFO - --启动波动率风险溢价捕捉系统--
2025-05-13 11:19:48,006 - vrp_system - INFO - 开始运行波动率风险溢价捕捉系统回测...
2025-05-13 11:19:48,007 - vrp_system - INFO - 回测期间: 2015-01-01 至 2023-12-31
2025-05-13 11:19:48,017 - vrp_system - INFO - 创建输出目录: result
2025-05-13 11:19:48,017 - vrp_system - INFO - 获取市场数据，设置: use_cache=True, force_download=False
2025-05-13 11:19:48,052 - vrp_system - INFO - 成功获取市场数据，共 2334 个交易日
2025-05-13 11:19:48,053 - vrp_system - INFO - 进行市场状态分类...
2025-05-13 11:19:48,217 - vrp_system - INFO - 执行期限结构交易策略...
2025-05-13 11:19:48,230 - vrp_system - INFO - 执行ETF对冲策略...
2025-05-13 11:19:48,384 - vrp_system - INFO - 执行动态策略选择...
2025-05-13 11:19:49,325 - vrp_system - INFO - 进行策略绩效分析...
2025-05-13 11:19:49,874 - vrp_system - INFO - 生成策略分析图表...
2025-05-13 11:20:01,295 - vrp_system - INFO - 图表已保存至 result 目录
2025-05-13 11:20:01,296 - vrp_system - INFO - 保存回测结果数据...
2025-05-13 11:20:01,397 - vrp_system - INFO - 回测完成，耗时: 13.39秒
2025-05-13 11:20:01,397 - vrp_system - INFO - 开始运行稳健性测试...
2025-05-13 11:20:01,415 - vrp_system - ERROR - 运行稳健性测试时发生错误: cannot pickle 'module' object
2025-05-13 11:20:01,417 - vrp_system - ERROR - Traceback (most recent call last):
  File "d:\jacky\homework\option vol\Code\src\main.py", line 322, in main
    robustness_results = comprehensive_robustness_test(
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\jacky\homework\option vol\Code\src\tests.py", line 498, in comprehensive_robustness_test
    results['parameter_sensitivity'][param] = run_parameter_sensitivity(
                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\jacky\homework\option vol\Code\src\tests.py", line 51, in run_parameter_sensitivity
    test_config = copy.deepcopy(base_config)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Jacky\anaconda3\envs\torch\Lib\copy.py", line 161, in deepcopy
    rv = reductor(4)
         ^^^^^^^^^^^
TypeError: cannot pickle 'module' object

2025-05-13 03:25:06,319 - vrp_system - INFO - --启动波动率风险溢价捕捉系统--
2025-05-13 03:25:06,322 - vrp_system - INFO - 开始运行波动率风险溢价捕捉系统回测...
2025-05-13 03:25:06,322 - vrp_system - INFO - 回测期间: 2015-01-01 至 2023-12-31
2025-05-13 03:25:06,323 - vrp_system - INFO - 获取市场数据，设置: use_cache=True, force_download=False
2025-05-13 03:25:06,354 - vrp_system - INFO - 成功获取市场数据，共 2334 个交易日
2025-05-13 03:25:06,354 - vrp_system - INFO - 进行市场状态分类...
2025-05-13 03:25:06,457 - vrp_system - INFO - 执行期限结构交易策略...
2025-05-13 03:25:06,475 - vrp_system - INFO - 执行ETF对冲策略...
2025-05-13 03:25:06,639 - vrp_system - INFO - 执行动态策略选择...
2025-05-13 03:25:07,445 - vrp_system - INFO - 进行策略绩效分析...
2025-05-13 03:25:08,070 - vrp_system - INFO - 生成策略分析图表...
2025-05-13 03:25:16,553 - vrp_system - INFO - 图表已保存至 result 目录
2025-05-13 03:25:16,553 - vrp_system - INFO - 保存回测结果数据...
2025-05-13 03:25:16,604 - vrp_system - INFO - 回测完成，耗时: 10.28秒
2025-05-13 03:25:16,604 - vrp_system - INFO - 开始运行稳健性测试...
2025-05-13 03:27:47,070 - vrp_system - INFO - --启动波动率风险溢价捕捉系统--
2025-05-13 03:27:47,074 - vrp_system - INFO - 开始运行波动率风险溢价捕捉系统回测...
2025-05-13 03:27:47,074 - vrp_system - INFO - 回测期间: 2015-01-01 至 2023-12-31
2025-05-13 03:27:47,074 - vrp_system - INFO - 获取市场数据，设置: use_cache=True, force_download=False
2025-05-13 03:27:47,110 - vrp_system - INFO - 成功获取市场数据，共 2334 个交易日
2025-05-13 03:27:47,111 - vrp_system - INFO - 进行市场状态分类...
2025-05-13 03:27:47,217 - vrp_system - INFO - 执行期限结构交易策略...
2025-05-13 03:27:47,234 - vrp_system - INFO - 执行ETF对冲策略...
2025-05-13 03:27:47,404 - vrp_system - INFO - 执行动态策略选择...
2025-05-13 03:27:48,201 - vrp_system - INFO - 进行策略绩效分析...
2025-05-13 03:27:48,755 - vrp_system - INFO - 生成策略分析图表...
2025-05-13 03:28:20,674 - vrp_system - INFO - --启动波动率风险溢价捕捉系统--
2025-05-13 03:28:20,677 - vrp_system - INFO - 开始运行波动率风险溢价捕捉系统回测...
2025-05-13 03:28:20,678 - vrp_system - INFO - 回测期间: 2015-01-01 至 2023-12-31
2025-05-13 03:28:20,678 - vrp_system - INFO - 获取市场数据，设置: use_cache=True, force_download=False
2025-05-13 03:28:20,709 - vrp_system - INFO - 成功获取市场数据，共 2334 个交易日
2025-05-13 03:28:20,709 - vrp_system - INFO - 进行市场状态分类...
2025-05-13 03:28:20,810 - vrp_system - INFO - 执行期限结构交易策略...
2025-05-13 03:28:20,826 - vrp_system - INFO - 执行ETF对冲策略...
2025-05-13 03:28:20,994 - vrp_system - INFO - 执行动态策略选择...
2025-05-13 03:28:21,796 - vrp_system - INFO - 进行策略绩效分析...
2025-05-13 03:28:22,347 - vrp_system - INFO - 生成策略分析图表...
2025-05-13 03:28:30,637 - vrp_system - INFO - 图表已保存至 result 目录
2025-05-13 03:28:30,637 - vrp_system - INFO - 保存回测结果数据...
2025-05-13 03:28:30,687 - vrp_system - INFO - 回测完成，耗时: 10.01秒
2025-05-13 03:28:30,687 - vrp_system - INFO - 开始运行稳健性测试...
2025-05-13 03:29:15,580 - vrp_system - ERROR - 运行稳健性测试时发生错误: single positional indexer is out-of-bounds
2025-05-13 03:29:15,582 - vrp_system - ERROR - Traceback (most recent call last):
  File "/home/linuxuser/vol/vol-risk-premium/src/main.py", line 322, in main
    robustness_results = comprehensive_robustness_test(
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/linuxuser/vol/vol-risk-premium/src/robustness_tests.py", line 554, in comprehensive_robustness_test
    train_performance, test_performance = train_test_split_analysis(
                                          ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/linuxuser/vol/vol-risk-premium/src/performance.py", line 250, in train_test_split_analysis
    train_performance[name] = calculate_performance_metrics(train_df[col].dropna())
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/linuxuser/vol/vol-risk-premium/src/performance.py", line 25, in calculate_performance_metrics
    total_return = cum_returns.iloc[-1] - 1
                   ~~~~~~~~~~~~~~~~^^^^
  File "/home/linuxuser/miniconda3/lib/python3.12/site-packages/pandas/core/indexing.py", line 1191, in __getitem__
    return self._getitem_axis(maybe_callable, axis=axis)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/linuxuser/miniconda3/lib/python3.12/site-packages/pandas/core/indexing.py", line 1752, in _getitem_axis
    self._validate_integer(key, axis)
  File "/home/linuxuser/miniconda3/lib/python3.12/site-packages/pandas/core/indexing.py", line 1685, in _validate_integer
    raise IndexError("single positional indexer is out-of-bounds")
IndexError: single positional indexer is out-of-bounds

2025-05-13 03:30:49,624 - vrp_system - INFO - --启动波动率风险溢价捕捉系统--
2025-05-13 03:30:49,627 - vrp_system - INFO - 开始运行波动率风险溢价捕捉系统回测...
2025-05-13 03:30:49,628 - vrp_system - INFO - 回测期间: 2015-01-01 至 2023-12-31
2025-05-13 03:30:49,628 - vrp_system - INFO - 获取市场数据，设置: use_cache=True, force_download=False
2025-05-13 03:30:49,660 - vrp_system - INFO - 成功获取市场数据，共 2334 个交易日
2025-05-13 03:30:49,660 - vrp_system - INFO - 进行市场状态分类...
2025-05-13 03:30:49,761 - vrp_system - INFO - 执行期限结构交易策略...
2025-05-13 03:30:49,778 - vrp_system - INFO - 执行ETF对冲策略...
2025-05-13 03:30:49,948 - vrp_system - INFO - 执行动态策略选择...
2025-05-13 03:30:50,742 - vrp_system - INFO - 进行策略绩效分析...
2025-05-13 03:30:51,596 - vrp_system - INFO - 生成策略分析图表...
2025-05-13 03:31:00,022 - vrp_system - INFO - 图表已保存至 result 目录
2025-05-13 03:31:00,023 - vrp_system - INFO - 保存回测结果数据...
2025-05-13 03:31:00,076 - vrp_system - INFO - 回测完成，耗时: 10.45秒
2025-05-13 03:31:00,076 - vrp_system - INFO - 开始运行稳健性测试...
2025-05-13 03:31:43,511 - vrp_system - ERROR - 运行稳健性测试时发生错误: NaTType does not support strftime
2025-05-13 03:31:43,514 - vrp_system - ERROR - Traceback (most recent call last):
  File "/home/linuxuser/vol/vol-risk-premium/src/main.py", line 322, in main
    robustness_results = comprehensive_robustness_test(
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/linuxuser/vol/vol-risk-premium/src/robustness_tests.py", line 535, in comprehensive_robustness_test
    results['alternative_indicators'] = run_alternative_indicators_test(
                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/linuxuser/vol/vol-risk-premium/src/robustness_tests.py", line 292, in run_alternative_indicators_test
    logger.info(f"测试 {name} 结果: 动态策略夏普比 = {results[name]['dynamic_sharpe']:.2f}, "
                                                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "nattype.pyx", line 54, in pandas._libs.tslibs.nattype._make_error_func.f
ValueError: NaTType does not support strftime

2025-05-13 03:35:25,503 - vrp_system - INFO - --启动波动率风险溢价捕捉系统--
2025-05-13 03:35:25,507 - vrp_system - INFO - 开始运行波动率风险溢价捕捉系统回测...
2025-05-13 03:35:25,507 - vrp_system - INFO - 回测期间: 2015-01-01 至 2023-12-31
2025-05-13 03:35:25,507 - vrp_system - INFO - 获取市场数据，设置: use_cache=True, force_download=False
2025-05-13 03:35:25,538 - vrp_system - INFO - 成功获取市场数据，共 2334 个交易日
2025-05-13 03:35:25,539 - vrp_system - INFO - 进行市场状态分类...
2025-05-13 03:35:25,644 - vrp_system - INFO - 执行期限结构交易策略...
2025-05-13 03:35:25,660 - vrp_system - INFO - 执行ETF对冲策略...
2025-05-13 03:35:25,830 - vrp_system - INFO - 执行动态策略选择...
2025-05-13 03:35:26,654 - vrp_system - INFO - 进行策略绩效分析...
2025-05-13 03:35:27,539 - vrp_system - INFO - 生成策略分析图表...
2025-05-13 03:35:36,025 - vrp_system - INFO - 图表已保存至 result 目录
2025-05-13 03:35:36,026 - vrp_system - INFO - 保存回测结果数据...
2025-05-13 03:35:36,077 - vrp_system - INFO - 回测完成，耗时: 10.57秒
2025-05-13 03:35:36,077 - vrp_system - INFO - 开始运行稳健性测试...
2025-05-13 03:36:21,838 - vrp_system - ERROR - 运行稳健性测试时发生错误: bad operand type for abs(): 'NaTType'
2025-05-13 03:36:21,840 - vrp_system - ERROR - Traceback (most recent call last):
  File "/home/linuxuser/vol/vol-risk-premium/src/main.py", line 322, in main
    robustness_results = comprehensive_robustness_test(
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/linuxuser/vol/vol-risk-premium/src/robustness_tests.py", line 557, in comprehensive_robustness_test
    results['alternative_indicators'] = run_alternative_indicators_test(
                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/linuxuser/vol/vol-risk-premium/src/robustness_tests.py", line 325, in run_alternative_indicators_test
    plot_alternative_indicators(results,
  File "/home/linuxuser/vol/vol-risk-premium/src/robustness_tests.py", line 439, in plot_alternative_indicators
    values = [abs(results[test][metric]) for test in test_names]
              ^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: bad operand type for abs(): 'NaTType'

2025-05-13 03:38:11,722 - vrp_system - INFO - --启动波动率风险溢价捕捉系统--
2025-05-13 03:38:11,726 - vrp_system - INFO - 开始运行波动率风险溢价捕捉系统回测...
2025-05-13 03:38:11,726 - vrp_system - INFO - 回测期间: 2015-01-01 至 2023-12-31
2025-05-13 03:38:11,726 - vrp_system - INFO - 获取市场数据，设置: use_cache=True, force_download=False
2025-05-13 03:38:11,756 - vrp_system - INFO - 成功获取市场数据，共 2334 个交易日
2025-05-13 03:38:11,757 - vrp_system - INFO - 进行市场状态分类...
2025-05-13 03:38:11,861 - vrp_system - INFO - 执行期限结构交易策略...
2025-05-13 03:38:11,877 - vrp_system - INFO - 执行ETF对冲策略...
2025-05-13 03:38:12,044 - vrp_system - INFO - 执行动态策略选择...
2025-05-13 03:38:12,840 - vrp_system - INFO - 进行策略绩效分析...
2025-05-13 03:38:13,711 - vrp_system - INFO - 生成策略分析图表...
2025-05-13 03:38:22,135 - vrp_system - INFO - 图表已保存至 result 目录
2025-05-13 03:38:22,136 - vrp_system - INFO - 保存回测结果数据...
2025-05-13 03:38:22,189 - vrp_system - INFO - 回测完成，耗时: 10.46秒
2025-05-13 03:38:22,190 - vrp_system - INFO - 开始运行稳健性测试...
2025-05-13 03:39:15,529 - vrp_system - INFO - 稳健性测试完成

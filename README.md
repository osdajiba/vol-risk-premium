# 双策略波动率风险溢价捕捉系统

## 基于市场状态的动态选择框架

本项目实现了一个轻量级波动率风险溢价捕捉系统，通过波动率期限结构交易策略和波动率ETF对冲策略的动态组合，实现对不同市场环境下波动率风险溢价的有效捕捉。

### 系统特点

* **市场状态分类框架** ：基于VIX水平、市场趋势和期限结构形态动态识别市场环境
* **策略互补性** ：期限结构策略擅长高波动环境，ETF对冲策略擅长低波动环境
* **动态策略选择** ：根据市场状态自动调整策略权重，优化风险收益特性
* **向量化计算** ：高效实现回测，直接从网络获取数据
* **全面绩效分析** ：提供详细的回测分析和可视化

### 安装依赖

```bash
pip install pandas numpy matplotlib seaborn scipy yfinance
```

### 项目结构

```
波动率风险溢价捕捉系统
├── main.py                 # 主程序入口
├── data_fetcher.py         # 数据获取模块
├── market_state.py         # 市场状态分类
├── strategies.py           # 交易策略实现
├── dynamic_selection.py    # 动态策略选择系统
├── performance.py          # 绩效评估
├── visualization.py        # 数据可视化
└── config.py               # 配置文件
```

### 使用方法

1. **基本运行**

```bash
python main.py
```

这将使用默认参数(2015-2023年)运行回测，并将结果保存在 `results`目录。

2. **自定义回测参数**

```bash
python main.py --start_date 2018-01-01 --end_date 2022-12-31 --output_dir custom_results
```

3. **只运行回测，不生成图表**

```bash
python main.py --no_plots
```

### 配置参数

系统主要参数可在 `config.py`中修改，包括：

* **回测参数** ：起止日期、交易成本、滑点等
* **策略参数** ：目标波动率、风险管理阈值等
* **市场状态分类参数** ：VIX阈值、期限结构阈值等
* **动态策略选择参数** ：各状态下的策略权重分配、权重调整速度等

### 生成的分析结果

运行回测后，系统会生成以下分析结果：

1. **策略绩效指标** ：年化收益、夏普比率、最大回撤、胜率等
2. **分市场状态分析** ：各状态下的策略表现
3. **COVID-19案例分析** ：极端市场环境下的策略表现
4. **样本内外测试** ：评估策略的稳健性
5. **可视化图表** ：

* 策略累积收益对比图
* 市场状态分类图
* 分状态策略表现图
* COVID-19期间分析图
* 策略权重动态转换图
* 样本内外绩效对比图
* 收益分布图

### 注意事项

1. 本系统中VIX期货数据为基于VIX和VXX合成的模拟数据，实际应用中应使用真实的期货数据。
2. 回测考虑了交易成本、滑点和做空成本，但仍是历史模拟，实际交易效果可能有所差异。
3. 动态策略选择系统需要及时识别市场状态变化，在实际应用中可能存在滞后性。

### 拓展方向

1. 引入机器学习方法优化市场状态识别
2. 纳入期权波动率曲面信息，增加策略维度
3. 开发更精细的风险管理机制，特别是针对尾部风险的控制
4. 探索波动率策略与其他资产类别的组合效应
